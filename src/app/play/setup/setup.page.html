<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Game Setup</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Game Setup</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="s-content-container">
    <section class="sd-section-container">
      <ion-item class="sd-section-header" lines="full">
        <ion-label>
          <div style="display: flex; justify-content: space-between">
            <span>Roster</span>
            <span>2 - 6 players</span>
          </div>
        </ion-label>
      </ion-item>
      <ion-item lines="full" style="--background: var(--md-surfaceContainer)">
        <ion-label style="display: flex; align-items: center; gap: .5rem; justify-content: center;">
          <ion-icon style="font-size: 24px; " color="tertiary" name="information-circle"></ion-icon>
          <ion-note color="tertiary">Tap the players in turn order</ion-note>
        </ion-label>
      </ion-item>
      <ion-list class="s-player-list" lines="none">
        @for (player of players; track player.id) {
          <ion-item button [detail]="false" (click)="handleSelectedPlayer(player.id!)">
            <ion-label>{{ player.name }}</ion-label>
            <ion-checkbox *ngIf="!selectedRosterIds.includes(player.id!)" slot="end"/>
            <ion-label *ngIf="selectedRosterIds.includes(player.id!)" slot="end" class="s-selection-indicator">
              {{ selectedRosterIds.indexOf(player.id!) + 1 }}
            </ion-label>
          </ion-item>
        }
      </ion-list>
    </section>

    <section class="sd-section-container">
      <ion-item class="sd-section-header" lines="full">
        <ion-label>Options</ion-label>
      </ion-item>
      <ion-list lines="none">
        <ion-item>
          <ion-icon slot="start" name="knight"></ion-icon>
          <ion-toggle [checked]="isCitiesKnights" (ionChange)="handleCitiesKnightsChanged()">
            Cities & Knights Expansion
          </ion-toggle>
        </ion-item>
        <ion-item>
          <ion-icon slot="start" name="viking-ship"></ion-icon>
          <ion-toggle [checked]="isSeafarers" (ionChange)="handleSeafarersChanged()">
            Seafarers Expansion
          </ion-toggle>
        </ion-item>
        <ion-item>
          <ion-icon slot="start" name="distribution"></ion-icon>
          <ion-toggle [checked]="useFairDice" (ionChange)="handleFairDiceChanged()">
            Use Fair Dice
          </ion-toggle>
        </ion-item>
      </ion-list>
    </section>
  </div>

  <div class="ion-padding">
    <ion-button expand="block" [disabled]="selectedRosterIds.length < 2" (click)="startGame()">
      Start Game
    </ion-button>
  </div>

</ion-content>

<ion-alert>

</ion-alert>
