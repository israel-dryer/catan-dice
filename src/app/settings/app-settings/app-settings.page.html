<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button icon="back"></ion-back-button>
    </ion-buttons>
    <ion-title>Settings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Settings</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="s-content-container">
    @if (settings) {
      <section class="sd-list-section">
        <ion-list>
          <ion-list-header>
            <ion-label color="primary">Game Settings</ion-label>
          </ion-list-header>
          <ion-item>
            <ion-toggle [checked]="settings.soundEffects" (ionChange)="handleSettingsChange('soundEffects', $event)">
              <ion-label>
                <h2>Sound Effects</h2>
                <ion-note class="ion-text-wrap">Toggle in game sound effects</ion-note>
              </ion-label>
            </ion-toggle>
          </ion-item>
          <ion-item>
            <ion-toggle [checked]="settings.fairDice" (ionChange)="handleSettingsChange('fairDice', $event)">
              <ion-label>
                <h2>Use Fair Dice</h2>
                <ion-note class="ion-text-wrap">Guaranteed normal distribution over 36 rolls</ion-note>
              </ion-label>
            </ion-toggle>
          </ion-item>
          <ion-item>
            <ion-toggle [checked]="settings.rollAnnouncer" (ionChange)="handleSettingsChange('rollAnnouncer', $event)">
              <ion-label>
                <h2>Roll Announce</h2>
                <ion-note class="ion-text-wrap">Dice result is spoken</ion-note>
              </ion-label>
            </ion-toggle>
          </ion-item>
          <ion-item lines="none">
            <ion-toggle [checked]="settings.rollHaptics" (ionChange)="handleSettingsChange('rollHaptics', $event)">
              <ion-label>
                <h2>Roll Haptics</h2>
                <ion-note class="ion-text-wrap">Device shakes when dice is rolled</ion-note>
              </ion-label>
            </ion-toggle>
          </ion-item>
        </ion-list>
      </section>
      <section class="sd-list-section">
        <ion-list>
          <ion-list-header>
            <ion-label color="primary">App Storage</ion-label>
          </ion-list-header>
          <ion-item button (click)="shareAppData()">
            <ion-icon slot="start" icon="share"></ion-icon>
            <ion-label>
              <h2>Share game data</h2>
              <ion-note>Game data is exported to JSON file</ion-note>
            </ion-label>
          </ion-item>
          <!-- TODO this will be implemented in the future by posting anonymously to cloud storage -->
          <ion-item button (click)="importAppData()" [disabled]="true">
            <ion-icon slot="start" icon="restore"></ion-icon>
            <ion-label>
              <h2>Restore data</h2>
              <ion-note>Restore data from cloud backup</ion-note>
            </ion-label>
          </ion-item>
          <ion-item button (click)="confirmDeleteAppData()">
            <ion-icon slot="start" icon="trash"></ion-icon>
            <ion-label>
              <h2>Delete all app data</h2>
              <ion-note>Permanently delete all app data</ion-note>
            </ion-label>
          </ion-item>
        </ion-list>
      </section>
    }
  </div>
</ion-content>
